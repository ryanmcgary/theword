/*
* Media Element
* HTML5 <video> and <audio> Shim
* http://mediaelementjs.com/
*
* Creates a JavaScript object that mimics HTML5 media object
* for browsers that don't understand HTML5 or can't play the provided codec
* Can also play MP4 (H.264), Ogg, WebM, FLV, WMV, WMA, ACC, and MP3
*
* Copyright 2010, John Dyer
* Dual licensed under the MIT or GPL Version 2 licenses.
*
* Version: 1.1.0
*/
var html5=html5||{};html5.meIndex=0;html5.plugins={silverlight:[{version:[3,0],types:["video/mp4","video/m4v","video/mov","video/wmv","audio/wma","audio/mp4","audio/m4a","audio/mp3"]}],flash:[{version:[9,0,124],types:["video/mp4","video/m4v","video/mov","video/flv","audio/flv","audio/mp3","audio/m4a","audio/mp3"]}]};html5.PluginDetector={hasPluginVersion:function(c,a){var b=this.plugins[c];a[1]=a[1]||0;a[2]=a[2]||0;return(b[0]>a[0]||(b[0]==a[0]&&b[1]>a[1])||(b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]))?true:false},nav:window.navigator,ua:window.navigator.userAgent.toLowerCase(),plugins:[],addPlugin:function(d,c,e,a,b){this.plugins[d]=this.detectPlugin(c,e,a,b)},detectPlugin:function(h,b,c,l){var j=[0,0,0],k,f,a;if(typeof(this.nav.plugins)!="undefined"&&typeof this.nav.plugins[h]=="object"){k=this.nav.plugins[h].description;if(k&&!(typeof this.nav.mimeTypes!="undefined"&&this.nav.mimeTypes[b]&&!this.nav.mimeTypes[b].enabledPlugin)){j=k.replace(h,"").replace(/^\s+/,"").replace(/\sr/gi,".").split(".");for(f=0;f<j.length;f++){j[f]=parseInt(j[f],10)}}}else{if(typeof(window.ActiveXObject)!="undefined"){try{a=new ActiveXObject(c);if(a){j=l(a)}}catch(g){}}}return j}};html5.PluginDetector.addPlugin("flash","Shockwave Flash","application/x-shockwave-flash","ShockwaveFlash.ShockwaveFlash",function(b){var a=[],c=b.GetVariable("$version");if(c){c=c.split(" ")[1].split(",");a=[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)]}return a});html5.PluginDetector.addPlugin("silverlight","Silverlight Plug-In","application/x-silverlight-2","AgControl.AgControl",function(b){var a=[0,0,0,0],c=function(f,d,e,g){while(f.isVersionSupported(d[0]+"."+d[1]+"."+d[2]+"."+d[3])){d[e]+=g}d[e]-=g};c(b,a,0,1);c(b,a,1,1);c(b,a,2,10000);c(b,a,2,1000);c(b,a,2,100);c(b,a,2,10);c(b,a,2,1);c(b,a,3,1);return a});if(html5.PluginDetector.ua.match(/Android 2\.[12]/)!==null){HTMLMediaElement.canPlayType=function(a){return(a.match(/video\/(mp4|m4v)/gi)!==null)?"probably":""}}html5.MediaFeatures={init:function(){var e=html5.PluginDetector.nav,c=html5.PluginDetector.ua,b,a,d=["source","track","audio","video"];this.isiPad=(c.match(/iPad/i)!==null);this.isiPhone=(c.match(/iPhone/i)!==null);this.isAndroid=(c.match(/Android/i)!==null);this.isIE=(e.appName.indexOf("Microsoft")!=-1);for(b=0;b<d.length;b++){a=document.createElement(d[b])}this.hasNativeFullScreen=(typeof a.webkitEnterFullScreen!=="undefined");if(c.match(/Chrome/gi)){this.hasNativeFullScreen=false}}};html5.MediaFeatures.init();html5.Utility={escapeHTML:function(a){return a.split("&").join("&amp;").split("<").join("&lt;").split('"').join("&quot;")},absolutizeUrl:function(a){var b=document.createElement("div");b.innerHTML='<a href="'+this.escapeHTML(a)+'">x</a>';return b.firstChild.href},getScriptPath:function(b){var f=0,e,g="",d="",c,a=document.getElementsByTagName("script");for(;f<a.length;f++){c=a[f].src;for(e=0;e<b.length;e++){d=b[e];if(c.indexOf(d)>-1){g=c.substring(0,c.indexOf(d));break}}if(g!==""){break}}return g},secondsToTimeCode:function(b){b=Math.round(b);var a=Math.floor(b/60);a=(a>=10)?a:"0"+a;b=Math.floor(b%60);b=(b>=10)?b:"0"+b;return a+":"+b}};html5.HtmlMediaElement={pluginType:"native",setCurrentTime:function(a){this.currentTime=a},setMuted:function(a){this.muted=a},setVolume:function(a){this.volume=a},setSrc:function(a){if(typeof a=="string"){this.src=a}else{var b,c;for(b=0;b<a.length;b++){c=a[b];if(this.canPlayType(c.type)){this.src=c.src}}}},setVideoSize:function(b,a){this.width=b;this.height=a}};html5.PluginMediaElement=function(a,b){this.id=a;this.pluginType=b;this.events={}};html5.PluginMediaElement.prototype={pluginElement:null,pluginType:"",playbackRate:-1,defaultPlaybackRate:-1,seekable:[],played:[],paused:true,ended:false,seeking:false,duration:0,muted:false,volume:1,currentTime:0,play:function(){this.pluginApi.playMedia();this.paused=false},load:function(){this.pluginApi.loadMedia();this.paused=false},pause:function(){this.pluginApi.pauseMedia();this.paused=true},canPlayType:function(e){var d,c,a,b=html5.plugins[this.pluginType];for(d=0;d<b.length;d++){a=b[d];if(html5.PluginDetector.hasPluginVersion(this.pluginType,a.version)){for(c=0;c<a.types.length;c++){if(e==a.types[c]){return true}}}}return false},setSrc:function(a){if(typeof a=="string"){this.pluginApi.setSrc(html5.Utility.absolutizeUrl(a))}else{var b,c;for(b=0;b<a.length;b++){c=a[b];if(this.canPlayType(c.type)){this.pluginApi.setSrc(html5.Utility.absolutizeUrl(c.src))}}}},setCurrentTime:function(a){this.pluginApi.setCurrentTime(a);this.currentTime=a},setVolume:function(a){this.pluginApi.setVolume(a);this.volume=a},setMuted:function(a){this.pluginApi.setMuted(a);this.muted=a},setVideoSize:function(b,a){if(this.pluginElement.style){this.pluginElement.style.width=b+"px";this.pluginElement.style.height=a+"px"}this.pluginApi.setVideoSize(b,a)},setFullscreen:function(a){this.pluginApi.setFullscreen(a)},addEventListener:function(b,c,a){this.events[b]=this.events[b]||[];this.events[b].push(c)},dispatchEvent:function(a){var c,b,d=this.events[a];if(d){b=Array.prototype.slice.call(arguments,1);for(c=0;c<d.length;c++){d[c].apply(null,b)}}}};html5.MediaPluginBridge={pluginMediaElements:{},htmlMediaElements:{},registerPluginElement:function(c,a,b){this.pluginMediaElements[c]=a;this.htmlMediaElements[c]=b},initPlugin:function(c){var a=this.pluginMediaElements[c],b=this.htmlMediaElements[c];switch(a.pluginType){case"flash":a.pluginElement=a.pluginApi=document.getElementById(c);break;case"silverlight":a.pluginElement=document.getElementById(a.id);a.pluginApi=a.pluginElement.Content.SilverlightApp;break}if(a.success){a.success(a,b)}},fireEvent:function(h,c,b){var g,f,a,d=this.pluginMediaElements[h];d.ended=false;d.paused=false;g={type:c,target:d};for(f in b){d[f]=b[f];g[f]=b[f]}a=b.bufferedTime||0;g.target.buffered=g.buffered={start:function(e){return 0},end:function(e){return a},length:1};d.dispatchEvent(g.type,g)}};html5.MediaElementDefaults={enablePluginDebug:false,plugins:["silverlight","flash"],type:"",pluginPath:html5.Utility.getScriptPath(["mediaelement.js","mediaelement.min.js","mediaelement-and-player.js","mediaelement-and-player.min.js"]),flashName:"flashmediaelement.swf",silverlightName:"silverlightmediaelement.xap",defaultVideoWidth:480,defaultVideoHeight:270,pluginWidth:-1,pluginHeight:-1,success:function(){},error:function(){}};html5.MediaElement=function(a,b){html5.HtmlMediaElementShim.create(a,b)};html5.HtmlMediaElementShim={create:function(f,e){var j=html5.MediaElementDefaults,h=(typeof(f)=="string")?document.getElementById(f):f,a=(h.tagName.toLowerCase()=="video"),b=(typeof(h.canPlayType)!="undefined"),c={method:"",url:""},i=h.getAttribute("poster"),g=h.getAttribute("autoplay"),d;for(d in e){j[d]=e[d]}i=(i=="undefined"||i===null)?"":i;c=this.determinePlayback(h,j,a,b);if(c.method=="native"){this.updateNative(h,j)}else{if(c.method!==""){this.createPlugin(h,j,a,c.method,(c.url!==null)?html5.Utility.absolutizeUrl(c.url):"",i,g)}else{this.createErrorMessage(h,j,c.url,i)}}},determinePlayback:function(r,u,a,b){var t=[],h,g,f,e,d,c,p,s={method:"",url:""},m,o,q;if(typeof(u.type)!="undefined"&&u.type!==""){t.push({type:u.type,url:null})}else{if(r.getAttribute("src")!="undefined"&&r.getAttribute("src")!==null){c=r.getAttribute("src");p=this.checkType(c,r.getAttribute("type"),a);t.push({type:p,url:c})}else{for(h=0;h<r.childNodes.length;h++){d=r.childNodes[h];if(d.nodeType==1&&d.tagName.toLowerCase()=="source"){c=d.getAttribute("src");p=this.checkType(c,d.getAttribute("type"),a);t.push({type:p,url:c})}}}}if(b){for(h=0;h<t.length;h++){if(r.canPlayType(t[h].type).replace(/no/,"")!==""){s.method="native";s.url=t[h].url;return s}}}for(h=0;h<t.length;h++){p=t[h].type;for(g=0;g<u.plugins.length;g++){m=u.plugins[g];o=html5.plugins[m];for(f=0;f<o.length;f++){q=o[f];if(html5.PluginDetector.hasPluginVersion(m,q.version)){for(e=0;e<q.types.length;e++){if(p==q.types[e]){s.method=m;s.url=t[h].url;return s}}}}}}return s},checkType:function(a,c,d){var b;if(a&&!c){b=a.substring(a.lastIndexOf(".")+1);return((d)?"video":"audio")+"/"+b}else{return c}},createErrorMessage:function(c,b,f,g){var a=document.createElement("div");a.className="me-cannotplay";try{a.style.width=c.width+"px";a.style.height=c.height+"px"}catch(d){}a.innerHTML=(g!=="")?'<a href="'+f+'"><img src="'+g+'" /></a>':'<a href="'+f+'">Download file</a>';c.parentNode.insertBefore(a,c);c.style.display="none";b.error(c)},createPlugin:function(i,m,b,f,h,j,g){var d=1,k=1,e="me_"+f+"_"+(html5.meIndex++),l=new html5.PluginMediaElement(e,f),c=document.createElement("div"),a;if(b){d=(m.videoWidth>0)?m.videoWidth:(i.getAttribute("width")!==null)?i.getAttribute("width"):m.defaultVideoWidth;k=(m.videoHeight>0)?m.videoHeight:(i.getAttribute("height")!==null)?i.getAttribute("height"):m.defaultVideoHeight}else{if(m.enablePluginDebug){d=320;k=240}}l.success=m.success;html5.MediaPluginBridge.registerPluginElement(e,l,i);c.className="me-plugin";i.parentNode.insertBefore(c,i);a=["id="+e,"poster="+j,"autoplay="+g,"width="+d,"height="+k];if(h!==null){a.push("file="+h)}if(m.enablePluginDebug){a.push("debug=true")}switch(f){case"silverlight":c.innerHTML='<object data="data:application/x-silverlight-2," type="application/x-silverlight-2" id="'+e+'" name="'+e+'" width="'+d+'" height="'+k+'"><param name="initParams" value="'+a.join(",")+'" /><param name="windowless" value="true" /><param name="background" value="black" /><param name="minRuntimeVersion" value="3.0.0.0" /><param name="autoUpgrade" value="true" /><param name="source" value="'+m.pluginPath+m.silverlightName+'" /></object>';break;case"flash":if(html5.MediaFeatures.isIE){c.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+e+'" width="'+d+'" height="'+k+'"><param name="movie" value="'+m.pluginPath+m.flashName+"?x="+(new Date())+'" /><param name="flashvars" value="'+a.join("&")+'" /><param name="quality" value="high" /><param name="bgcolor" value="#000000" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="sameDomain" /><param name="allowFullScreen" value="true" /></object>'}else{c.innerHTML='<embed id="'+e+'" name="'+e+'" play="true" loop="false" quality="high" bgcolor="#000000" wmode="transparent" allowScriptAccess="sameDomain" allowFullScreen="true" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+m.pluginPath+m.flashName+"?"+a.join("&")+'" width="'+d+'" height="'+k+'"></embed>'}break}i.style.display="none"},updateNative:function(c,b){for(var a in html5.HtmlMediaElement){c[a]=html5.HtmlMediaElement[a]}b.success(c,c)}};window.html5=html5;window.MediaElement=html5.MediaElement;
/*
 * Media Element jQuery plugin
 * http://mediaelementjs.com/
 *
 * Creates a controller bar for HTML5 <video> add <audio> tags
 * using jQuery and MediaElement.js
 *
 * Copyright 2010, John Dyer
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Version: 1.1.0
 */
(function(a){html5.MepDefaults={defaultVideoWidth:480,defaultVideoHeight:270,videoWidth:-1,videoHeight:-1,audioWidth:300,audioHeight:30,messages:{start:"Click to Start",loading:"Loading",paused:"Paused",error:"Error",ended:"Ended"},controls:{playpause:true,timerail:true,duration:true,volume:true,captions:true,fullscreen:true},loop:false};html5.mepIndex=0;html5.MediaElementPlayer=function(d,e){var b=this,c=html5.MediaFeatures;b.$media=a(d);b.options=a.extend(true,{},html5.MepDefaults,e);b.isVideo=(b.$media[0].tagName.toLowerCase()=="video");if(c.isiPad||c.isiPhone){b.$media.attr("controls","controls");b.$media.removeAttr("poster");if(c.isiPad&&b.$media[0].getAttribute("autoplay")!==null){b.$media[0].load();b.$media[0].play()}return}else{if(c.isAndroid&&b.isVideo){b.$media.attr("controls","controls");return}else{b.$media.removeAttr("controls")}}b.createPlayer()};html5.MediaElementPlayer.prototype={createPlayer:function(){var b=this,c=a.extend(true,{},b.options,{success:function(d,e){b.setupPlayer(d,e)},error:function(d){b.handleError(d)}});b.id="mep_"+html5.mepIndex++;b.$media.before(a('<div id="'+b.id+'" class="mep-container"><div class="mep-mediaelement"></div><div class="mep-captions"><img /></div><div class="mep-poster"><img /></div><div class="mep-overlay"><div class="mep-overlay-message"></div></div><div class="mep-controls"><div class="mep-playpause-button mep-play"><span></span></div><div class="mep-time-rail"><span class="mep-time-total"><span class="mep-time-loaded"></span><span class="mep-time-current"></span><span class="mep-time-handle"></span></span></div><div class="mep-time"><span class="mep-currenttime"></span> <span> | </span> <span class="mep-duration"></span></div><div class="mep-captions-button"><span></span></div><div class="mep-volume-button mep-mute"><span></span><div class="mep-volume-slider"><div class="mep-volume-rail"><div class="mep-volume-handle"></div></div></div></div><div class="mep-fullscreen-button"><span></span></div></div><div class="mep-clear"></div></div>'));b.container=a("#"+this.id);b.container.addClass(b.$media[0].className).find(".mep-mediaelement").append(b.$media);if(b.isVideo){b.width=(b.options.videoWidth>0)?b.options.videoWidth:(b.$media[0].getAttribute("width")!==null)?b.$media.attr("width"):b.options.defaultVideoWidth;b.height=(b.options.videoHeight>0)?b.options.videoHeight:(b.$media[0].getAttribute("height")!==null)?b.$media.attr("height"):b.options.defaultVideoHeight}else{b.width=b.options.audioWidth;b.height=b.options.audioHeight}b.buildPoster();b.buildOverlay();b.setPlayerSize(b.width,b.height);b.buildControls();c.pluginWidth=b.height;c.pluginHeight=b.width;html5.MediaElement(b.$media[0],c)},setupPlayer:function(b,d){var c=this;c.mediaElement=b;c.domNode=d;c.buildControlBar();c.buildPlayPause();c.buildTimeRail();c.buildVolumeControls();c.buildFullscreen();c.mediaElement.addEventListener("click",function(f){if(c.mediaElement.paused){c.mediaElement.play()}},true);c.mediaElement.addEventListener("playing",function(f){c.poster.hide();c.playpause.removeClass("mep-play").addClass("mep-pause");c.hideMessage()},true);c.mediaElement.addEventListener("pause",function(f){c.playpause.removeClass("mep-pause").addClass("mep-play");c.showMessage(c.options.messages.paused)},true);c.mediaElement.addEventListener("ended",function(f){if(c.options.loop){c.mediaElement.setCurrentTime(0);c.setTimePosition();c.mediaElement.play()}else{c.poster.show();c.playpause.removeClass("mep-pause").addClass("mep-play");c.showMessage(c.options.messages.ended)}},true);c.mediaElement.addEventListener("loadedmetadata",function(f){if(c.isVideo&&c.options.videoHeight<=0&&c.$media[0].getAttribute("height")===null&&!isNaN(f.target.videoHeight)){c.setPlayerSize(f.target.videoWidth,f.target.videoHeight);c.setRailSize();c.mediaElement.setVideoSize(f.target.videoWidth,f.target.videoHeight)}},true);setTimeout(function(){c.setRailSize()},50);if(c.options.success){c.options.success(c.mediaElement,c.domNode)}this.loadTracks()},loadTracks:function(){var b=this,c=b.$media.find("track[kind=subtitles]");b.tracks=[];b.trackToLoad=-1;c.each(function(){b.tracks.push({srclang:a(this).attr("srclang"),src:a(this).attr("src"),entries:[],isLoaded:false})});if(b.tracks.length>0){b.loadNextSubtitle()}else{b.captions.remove();b.setRailSize()}},loadNextSubtitle:function(){var b=this;b.trackToLoad++;if(b.trackToLoad<b.tracks.length){b.loadSubtitles(b.trackToLoad)}},loadSubtitles:function(b){var c=this,d=c.tracks[b];a.ajax({url:d.src,success:function(e){d.entries=SrtParser.parse(e);c.loadNextSubtitle()},error:function(){c.loadNextSubtitle()}})},buildPoster:function(){var b=this;b.poster=b.container.find(".mep-poster");b.posterImg=b.poster.find("img");b.posterUrl=b.$media.attr("poster");b.posterUrl=(b.posterUrl===null||b.posterUrl==undefined)?"":b.posterUrl;if(b.posterUrl!==""){b.posterImg.attr("src",b.posterUrl)}else{b.poster.hide()}},buildOverlay:function(){var b=this;b.overlay=b.container.find(".mep-overlay");b.overlayMessage=b.container.find(".mep-overlay-message");if(b.$media[0].getAttribute("autoplay")!==null){b.showMessage(b.options.messages.loading)}else{b.showMessage(b.options.messages.start)}b.overlay.bind("click",function(c){if(b.mediaElement.paused){b.mediaElement.play()}},true)},showMessage:function(b){if(this.isVideo){this.overlayMessage.html(b);this.overlay.css("visibility","visible")}},hideMessage:function(){this.overlay.css("visibility","hidden")},buildControls:function(){var b=this;b.controls=b.container.find(".mep-controls");b.isControlsVisible=true;b.playpause=b.controls.find(".mep-playpause-button");b.fullscreen=b.controls.find(".mep-fullscreen-button");if(!b.isVideo){b.fullscreen.remove()}b.time=b.controls.find(".mep-time");b.currentTime=b.controls.find(".mep-currenttime").html("00:00");b.duration=b.controls.find(".mep-duration").html("00:00");b.captions=b.controls.find(".mep-captions-button");b.mute=b.controls.find(".mep-volume-button");b.volumeSlider=b.controls.find(".mep-volume-slider");b.volumeRail=b.controls.find(".mep-volume-rail");b.volumeHandle=b.controls.find(".mep-volume-handle");b.timeRail=b.controls.find(".mep-time-rail");b.timeCurrent=b.timeRail.find(".mep-time-current").width(0);b.timeLoaded=b.timeRail.find(".mep-time-loaded").width(0);b.timeTotal=b.timeRail.find(".mep-time-total");b.timeHandle=b.controls.find(".mep-time-handle");b.controls.show();b.setRailSize();if(!b.options.controls.playpause){b.playpause.remove()}if(!b.options.controls.timerail){b.timeRail.remove()}if(!b.options.controls.duration){b.time.remove()}if(!b.options.controls.volume){b.mute.remove()}if(!b.options.controls.fullscreen){b.fullscreen.remove()}},buildControlBar:function(){var b=this;if(b.isVideo){b.container.bind("mouseenter",function(){b.controls.fadeIn(200);b.setRailSize();b.isControlsVisible=true}).bind("mouseleave",function(){b.controls.fadeOut(200);b.isControlsVisible=false})}},buildPlayPause:function(){var b=this;b.playpause.bind("click",function(){if(b.playpause.hasClass("mep-play")){b.mediaElement.play();b.playpause.removeClass("mep-play").addClass("mep-pause")}else{b.mediaElement.pause();b.playpause.removeClass("mep-pause").addClass("mep-play")}})},buildTimeRail:function(){var b=this;b.timeRail.delegate("span","click",function(h){var c=h.pageX,i=b.timeTotal.offset(),f=b.timeTotal.outerWidth(),d=((c-i.left)/f),g=d*b.mediaElement.duration;b.mediaElement.setCurrentTime(g)});b.mediaElement.addEventListener("timeupdate",function(c){if(!b.isControlsVisible){return}b.setTimePosition();b.setTimeLoaded(c.target)},true);b.mediaElement.addEventListener("progress",function(c){b.setTimeLoaded(c.target)},true)},setTimePosition:function(){var b=this,d,c;if(b.mediaElement.currentTime&&b.mediaElement.duration){b.currentTime.html(html5.Utility.secondsToTimeCode(b.mediaElement.currentTime));if(b.mediaElement.duration){b.duration.html(html5.Utility.secondsToTimeCode(b.mediaElement.duration))}d=b.timeTotal.width()*b.mediaElement.currentTime/b.mediaElement.duration;c=d-(b.timeHandle.width()/2);b.timeCurrent.width(d);b.timeHandle.css("left",c)}},setTimeLoaded:function(d){var b=this,c=null;if(d&&d.bytesTotal!=undefined&&d.bytesTotal>0&&d.bufferedBytes!=undefined){c=d.bufferedBytes/d.bytesTotal}else{if(d&&d.buffered&&d.buffered.length>0&&d.buffered.end&&d.duration){c=d.buffered.end(0)/d.duration}}if(c!==null){b.timeLoaded.width(b.timeTotal.width()*c)}},setRailSize:function(){var b=this,c=b.playpause.outerWidth(true)+b.time.outerWidth(true)+b.mute.outerWidth(true)+b.captions.outerWidth(true)+((b.isVideo)?b.fullscreen.outerWidth(true):0),d=b.controls.width()-c-(b.timeRail.outerWidth(true)-b.timeRail.outerWidth(false));b.timeRail.width(d);b.timeTotal.width(d-(b.timeTotal.outerWidth(true)-b.timeTotal.width()))},setPlayerSize:function(d,b){var c=this;c.width=parseInt(d,10);c.height=parseInt(b,10);c.container.width(c.width).height(c.height);c.overlay.width(c.width).height(c.height);c.posterImg.height(c.height).width(c.width)},handleError:function(c){var b=this;b.$media.hide();b.overlay.hide();b.controls.hide();b.poster.hide()},buildFullscreen:function(){var b=this;b.isFullScreen=false;b.normalHeight=0;b.normalWidth=0;b.fullscreen.bind("click",function(){b.setFullScreen(!b.isFullScreen)})},setFullScreen:function(b){var c=this;switch(c.mediaElement.pluginType){case"flash":c.mediaElement.setFullscreen(b);break;case"silverlight":c.mediaElement.setFullscreen(b);break;case"native":if(html5.MediaFeatures.hasNativeFullScreen){if(b){c.mediaElement.webkitEnterFullScreen()}else{c.mediaElement.webkitExitFullScreen()}}else{if(b){c.normalHeight=c.$media.height();c.normalWidth=c.$media.width();c.container.addClass("mep-container-fullscreen").width("100%").height("100%").css("z-index",1000);c.$media.width("100%").height("100%");c.overlay.width("100%").height("100%");c.posterImg.width("100%").height("auto");c.fullscreen.removeClass("mep-fullscreen").addClass("mep-unfullscreen");c.setRailSize();c.escB=function(d){c.escListener(d)};c.resB=function(d){c.resizeListener(d)};a(document).bind("keydown",c.escB);a(window).bind("resize",c.resB)}else{c.container.removeClass("mep-container-fullscreen").width(c.normalWidth).height(c.normalHeight).css("z-index",1);c.$media.width(c.normalWidth).height(c.normalHeight);c.posterImg.width(c.normalWidth).height(c.normalHeight);c.fullscreen.removeClass("mep-unfullscreen").addClass("mep-fullscreen");c.setRailSize();a(document).unbind("keydown",c.escB);a(window).unbind("resize",c.resB)}}}c.isFullScreen=b},escListener:function(b){if(b.keyCode==27){this.setFullScreen(false)}},resizeListener:function(b){this.setRailSize()},buildVolumeControls:function(){var b=this;b.vmmB=function(c){b.volumeMove(c)};b.vrmB=function(c){b.removeMouseMove(c)};b.volumeSlider.bind("mousedown",function(c){b.volumeMove(c);a(document).bind("mousemove",b.vmmB).bind("mouseup",b.vrmB)});b.mute.find("span").bind("click",function(){if(b.mediaElement.muted){b.mediaElement.setMuted(false);b.mute.removeClass("mep-unmute").addClass("mep-mute");b.positionVolumeHandle(1)}else{b.mediaElement.setMuted(true);b.mute.removeClass("mep-mute").addClass("mep-unmute");b.positionVolumeHandle(0)}})},volumeMove:function(g){var c=this,b=c.volumeRail.height(),f=g.pageY-c.volumeRail.offset().top,d=(b-f)/b;if(f<0){f=0}else{if(f>b){f=b}}c.volumeHandle.css("top",f-(c.volumeHandle.height()/2));if(d==0){c.mediaElement.setMuted(true);c.mute.removeClass("mep-mute").addClass("mep-unmute")}else{c.mediaElement.setMuted(false);c.mute.removeClass("mep-unmute").addClass("mep-mute")}c.mediaElement.setVolume(d)},positionVolumeHandle:function(c){var b=this;b.volumeHandle.css("top",b.volumeRail.height()-(b.volumeRail.height()*c)-(b.volumeHandle.height()/2))},removeMouseMove:function(){var b=this;a(document).unbind("mousemove",b.vmmB).unbind("mouseup",b.vrmB)}};html5.SrtParser={timecodeToSeconds:function(b){var c=b.split(":");return c[0]*60*60+c[1]*60+parseFloat(c[2].replace(",","."))},parse:function(e){var g=/^[0-9]+$/,h=/^([0-9]{2}:[0-9]{2}:[0-9]{2}(,[0-9]{1,3})?) --\> ([0-9]{2}:[0-9]{2}:[0-9]{2}(,[0-9]{3})?)(.*)$/,f=0,d=e.split(/\r?\n/),c={text:[],times:[]},b,j;for(;f<d.length;f++){if(g.exec(d[f])){f++;b=h.exec(d[f]);if(b&&f<d.length){f++;j=d[f];f++;while(d[f]!==""&&f<d.length){j=j+"\n"+d[f];f++}c.text.push(j);c.times.push({start:this.timecodeToSeconds(b[1]),stop:this.timecodeToSeconds(b[3]),settings:b[5]})}}}return c},canTranslate:function(){return !(typeof(google)=="undefined"||typeof(google.language)=="undefined")},translate:function(d,j,f,h){if(!this.canTranslate()){h(null);return}var g=d.text.join(" <span></span>"),b={text:[],times:[]},c,e;google.language.translate(g,j,f,function(i){c=i.translation.split("<span></span>");for(e=0;e<d.text.length;e++){b.text[e]=c[e];b.times[e]={start:d.times[e].start,stop:d.times[e].stop,settings:d.times[e].settings}}h(b)})}};jQuery.fn.mediaelementplayer=function(b){return this.each(function(){return new MediaElementPlayer(a(this),b)})};window.MediaElementPlayer=html5.MediaElementPlayer})(jQuery);
